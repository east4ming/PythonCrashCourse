# 文件和异常

## 从文件中读取数据

### 读取整个文件

> 具体见`b_file_reader.py`

- `open()` 返回一个表示文件的对象
- `with` 在不需要访问文件后将其关闭, 这样就无需调用 `close()`
- `file_object.read()` 读取打开文件的全部内容.

### 文件路径

> 注意:
> windows系统有时可以正确解读文件路径中的斜杠'/'. 如果是windows系统, 且结果不符合预期, 确保在文件路径中使用反斜杠'\'.
> 为了确保万无一失, 应以原始字符串的方式指定路径, 及在开头的单引号前加上`r`

### 逐行读取

> 见`b_file_reader_2.py`

执行后发现有空白行, 为什么?
在该文件中, 每行的末尾都有一个看不见的换行符(如: '/n'), 而print语句也会加上一个换行符, 因此每行末尾有**2个换行符**: 一个来自文件, 一个来自print语句. 要消除多余的空白行, 可使用`rstrip()`

### 创建一个包含文件各行内容的列表

> 见`b_file_reader_2.1.py`

`file_object.readlines()` 从文件中读取每一行, 并将其存储在一个列表中.

### 使用文件的内容

> 见`b_pi_string.py`

`string.strip()` 删除左右两边的空格.
读取文本文件时, 将其文本都解读为**字符串**. 如果要转换为数字, 需要使用`int()`或`float()`进行转换.

### 包含一百万位的大型文件

> 见`b_pi_string.1.py`

### 圆周率值中包含你的生日吗

> 见`b_pi_birthday.py`

## 写入文件

### 10.2.1 写入空文件

> 见`b_write_message.py`

第二个实参(`w`), 以*写入模式*打开文件. 模式有:

- r: 读取模式(默认模式)
- w: 写入模式. **如果文件已存在, 会清空该文件**
- a: 附加模式
- r+:

如果写入的文件不存在, `open()`将自动创建.

> python只能将**字符串**写入文本文件. 
> 要将数值写入文本文件, 必须先使用函数`str()`将其转换为字符串格式.

### 写入多行

函数`write()`不会在文本末尾添加换行符号, 需要手动添加换行符号.

> 见`b_write_messages.py`

### 附加到文件

如果要给文件添加内容, 而不是覆盖原有内容, 可以*附加模式*打开文件. 
使用该模式, python不会在返回文件对象前情况前清空文件, 写入的文件的行都添加到文件末尾.
如果文件不存在, 会创建一个空文件.

> 见`b_write_messages.1.py`

## 异常

python使用被称为*异常*的特殊对象来管理程序执行期间发生的错误.
每当发生错误时, 都会创建一个异常对象.
如果编写了处理该异常的代码, 程序会继续运行.
如果未对异常进行处理, 程序将停止, 并显示一个traceback, 其中包含有关异常的报告.

异常使用`try - except`代码块处理.

### 处理 ZeroDivisionError 异常

### 使用 try - except 代码块

> 见`b_division.py`

### 使用异常避免崩溃

发生错误时, 如果程序还有工作没有完成, 妥善处理错误尤其重要.

> 见`b_division.1.py`


