# 4. 操作列表

## 4.1 遍历整个列表

### 4.1.1 深入研究循环

```python
# 推荐的for循环变量命名:
for cat in cats:
    pass
for dog in dogs:
    pass
for item in list_of_items:
    pass
```

## 4.3 创建数值列表

### 4.3.1 `range()`

```python
for value in range(1, 5) # 第一个包含, 第二个不包含
    print(value)
```

### 4.3.2 用`range()`创建数字列表

```python
numbers = list(range(1, 6))
print(numbers)
even_numbers = list(range(2, 11, 2))
print(even_numbers)
```

```python
# squares.py
squares = []
for value in range(1, 11):
    squares.append(value ** 2)
print(squares)
```

```python
# 统计计算
numbers = list(range(10))
min(numbers)
max(numbers)
sum(numbers)
```

### 4.3.4 列表解析

```python
squares = [value**2 for value in range(1, 11)]
print(squares)
```

## 4.4 使用列表一部分

### 4.4.1 切片

```python
# 切片示例
players = ['charles', 'martina', 'michael', 'florence', 'eli']
players[1:4]
players[:4]
players[2:]
players[-3:]
# 复制列表
my_players = players[:]
# 错误的复制列表示例: 会指向同一引用
my_players = players
```

## 4.5 元组

## 4.6 设置代码格式

- 四个空格缩进
- 不要使用Tab
- 代码行不要超过80个字符
- 注释行不要超过72个字符
- 讲程序的不同部分分开, 使用空行

### 4.6.1 空行

- 顶级函数和类的定义之间有两行空行
- 类内部的函数定义之间有一行空行
- python2 默认: ASCII
- python3 默认: UTF-8

### 4.6.2 导入

- 导入通常是单独一行
- 导入顺序: 标准库, 第三方, 特定本地应用/库

### 4.6.3 字符串引号

- 选择一种引号(单引号或双引号)并一直坚持用下去
- 当包含同种引号时, 使用反斜杠
- 三引号, 总是使用双引号

### 4.6.4 表达式和语句中的空格

- 始终在二元操作符两边放一个空格.
- 当=号指示关键字参数或默认参数时, 不要使用空格.
- 不鼓励使用复合语句(同一行有多条语句)

### 4.6.5 注释

- 当代码修改时, 始终优先更新注释
- 注释是完整的句子. 首字母大写.
- 在句尾的句号后使用两个空格.
- 注释块为#加一个空格开头
- 注释块段落由仅包含#的行隔开
- 行内注释: 谨慎使用. 与代码之间至少用2个空行隔开.


### 4.6.6 文档字符串

- 为所有的公共模块, 函数, 类和方法书写文档字符串. 
- 对非公开的方法则不需要写文档. 但应该加注释. 注释写在def行后面.
- 多行文档字符串以一行"""结束

### 4.6.7 版本注记

- `__version__ = "$Revision$"`
- `# $Source$`
- 以上2行包括在模块的文档字符串之后, 任何其他代码之前, 上下各用一个空行分开

### 4.6.8 命名规范

- 带下划线的小写字符串
- 首字母大写的字符串(大写所有缩写字符. 如: HTTPServerError)
- 不要使用"I" "O" 或"l" 这样的单字符命名

#### 包名和模块名

- 模块名:短, 所有字母小写. 可以在模块中使用下划线来提高可读性
- 包名: 短, 小写, 不鼓励用下划线

#### 类名

- 首字母大写

#### 异常名

- 同"类"的规范.
- 使用后缀"Error"

#### 函数名

- 小写字母, 必要时可用下划线

#### 函数和方法参数

- 使用self做实例化方法的第一个参数
- 使用cls做类方法的第一个参数
- 如果与关键字冲突, 最好是为参数名添加一个后置的下划线

#### 方法名和实例变量

- 小写字母, 必要时加下划线
- 非公开方法和实例变量使用一个前导下划线

#### 常量

- 通常用于模块界别
- 并且所有字母大写, 单词用下划线分开. 如: MAX_OVERFLOW和TOTAL

### 4.6.9 继承的设计

- 类的方法和实例变量默认: 非公开
- 公开属性没有前导下划线

### 4.6.10 公共和内部借口

- 向后兼容性保证只适用于公共接口
- 文档接口默认公开, 其他接口应假定为内部接口

### 4.6.11 程序设计建议

- 与单值比如None比较使用is或is not, 不要使用等号操作符
- 从Exception而不是BaseException中派生出异常.
